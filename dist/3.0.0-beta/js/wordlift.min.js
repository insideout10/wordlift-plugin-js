(function(){var a,b,c,d,e=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};b=function(){function a(a){this._html=a}return a.prototype._htmlPositions=[],a.prototype._textPositions=[],a.prototype._html="",a.prototype._text="",a.create=function(b){var c;return c=new a(b),c.parse(),c},a.prototype.parse=function(){var a,b,c,d,e,f,g,h,i;for(this._htmlPositions=[],this._textPositions=[],this._text="",f=/([^<]*)(<[^>]*>)([^<]*)/gim,g=0,b=0;e=f.exec(this._html);)d=e[1],a=e[2],c=e[3],i=d+("</p>"===a.toLowerCase()?"\n\n":""),h=c,g+=i.length,b+=d.length+a.length,0<c.length&&(this._htmlPositions.push(b),this._textPositions.push(g)),g+=h.length,b+=c.length,this._text+=i+h;return 0===this._textPositions.length||0!==this._textPositions[0]?(this._htmlPositions.unshift(0),this._textPositions.unshift(0)):void 0},a.prototype.text2html=function(a){var b,c,d,e,f;for(b=this._textPositions[0],d=this._textPositions[0],c=e=0,f=this._textPositions.length;(f>=0?f>e:e>f)&&!(a<this._textPositions[c]);c=f>=0?++e:--e)b=this._htmlPositions[c],d=this._textPositions[c];return b+a-d},a.prototype.html2text=function(a){var b,c,d,e,f;for(b=this._textPositions[0],d=this._textPositions[0],c=e=0,f=this._htmlPositions.length;(f>=0?f>e:e>f)&&!(a<this._htmlPositions[c]);c=f>=0?++e:--e)b=this._htmlPositions[c],d=this._textPositions[c];return d+a-b},a.prototype.insertHtml=function(a,b){var c;return c=this.text2html(b.text),this._html=this._html.substring(0,c)+a+this._html.substring(c),this.parse()},a.prototype.getHtml=function(){return this._html},a.prototype.getText=function(){return this._text},a}(),window.Traslator=b,angular.module("wordlift.tinymce.plugin.config",[]).constant("Configuration",{supportedTypes:["schema:Place","schema:Event","schema:CreativeWork","schema:Product","schema:Person","schema:Organization"],entityLabels:{entityLabel:"enhancer:entity-label",entityType:"enhancer:entity-type",entityReference:"enhancer:entity-reference",textAnnotation:"enhancer:TextAnnotation",entityAnnotation:"enhancer:EntityAnnotation",selectionPrefix:"enhancer:selection-prefix",selectionSuffix:"enhancer:selection-suffix",selectedText:"enhancer:selected-text",confidence:"enhancer:confidence",relation:"dc:relation"}}),angular.module("wordlift.tinymce.plugin.directives",["wordlift.tinymce.plugin.controllers"]).directive("wlEntities",function(){return{restrict:"E",scope:{textAnnotation:"=",onSelect:"&"},link:function(a){return a.select=function(b){var c,d,e;e=a.textAnnotation.entityAnnotations;for(d in e)c=e[d],c.selected=b.id===c.id&&!c.selected;return a.onSelect({textAnnotation:a.textAnnotation,entityAnnotation:b.selected?b:null})}},template:'<div>\n  <ul>\n    <li ng-repeat="entityAnnotation in textAnnotation.entityAnnotations | orderObjectBy:\'confidence\':true">\n      <wl-entity on-select="select(entityAnnotation)" entity-annotation="entityAnnotation"></wl-entity>\n    </li>\n  </ul>\n</div>'}}).directive("wlEntity",function(){return{restrict:"E",scope:{entityAnnotation:"=",onSelect:"&"},template:'<div class="entity {{entityAnnotation.entity.type}}" ng-class="{selected: true==entityAnnotation.selected}" ng-click="onSelect()" ng-show="entityAnnotation.entity.label">\n  <div class="thumbnail" ng-show="entityAnnotation.entity.thumbnail" title="{{entityAnnotation.entity.id}}" ng-attr-style="background-image: url({{entityAnnotation.entity.thumbnail}})"></div>\n  <div class="thumbnail empty" ng-hide="entityAnnotation.entity.thumbnail" title="{{entityAnnotation.entity.id}}"></div>\n  <div class="confidence" ng-bind="entityAnnotation.confidence"></div>\n  <div class="label" ng-bind="entityAnnotation.entity.label"></div>\n  <div class="type"></div>\n  <div class="source" ng-class="entityAnnotation.entity.source" ng-bind="entityAnnotation.entity.source"></div>\n</div>'}}).directive("wlEntityInputBoxes",function(){return{restrict:"E",scope:{textAnnotations:"="},template:"<div class=\"wl-entity-input-boxes\" ng-repeat=\"textAnnotation in textAnnotations\">\n  <div ng-repeat=\"entityAnnotation in textAnnotation.entityAnnotations | filterObjectBy:'selected':true\">\n\n    <input type='text' name='wl_entities[{{entityAnnotation.entity.id}}][uri]' value='{{entityAnnotation.entity.id}}'>\n    <input type='text' name='wl_entities[{{entityAnnotation.entity.id}}][label]' value='{{entityAnnotation.entity.label}}'>\n    <textarea name='wl_entities[{{entityAnnotation.entity.id}}][description]'>{{entityAnnotation.entity.description}}</textarea>\n    <input type='text' name='wl_entities[{{entityAnnotation.entity.id}}][type]' value='{{entityAnnotation.entity.type}}'>\n\n    <input ng-repeat=\"image in entityAnnotation.entity.thumbnails\" type='text'\n      name='wl_entities[{{entityAnnotation.entity.id}}][image][]' value='{{image}}'>\n    <input ng-repeat=\"sameAs in entityAnnotation.entity.sameAs\" type='text'\n      name='wl_entities[{{entityAnnotation.entity.id}}][sameas][]' value='{{sameAs}}'>\n\n    <input type='text' name='wl_entities[{{entityAnnotation.entity.id}}][latitude]' value='{{entityAnnotation.entity.latitude}}'>\n    <input type='text' name='wl_entities[{{entityAnnotation.entity.id}}][longitude]' value='{{entityAnnotation.entity.longitude}}'>\n\n  </div>\n</div>"}}),angular.module("AnalysisService",[]).service("AnalysisService",["$http","$q","$rootScope","$log",function(a,b,c){var d,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;return f="@context",j="@graph",d="analysisReceived",m="person",l="organization",n="place",g="event",k="music",o="http://www.w3.org/2000/01/rdf-schema#",q=""+o+"label",p=""+o+"comment",h="http://rdf.freebase.com/ns/",i=""+h+"common.topic.description",r="http://schema.org/",s=""+r+"description",t=function(a,b,c){var d,e;for(e in a)if(d=a[e],d.start===b&&d.end===c)return d;return null},u={promise:void 0,isRunning:!1,abort:function(){return this.isRunning&&null!=this.promise?this.promise.resolve():void 0},preselect:function(a,b){var c,d,e,f,g,h;for(h=[],f=0,g=b.length;g>f;f++)c=b[f],e=t(a.textAnnotations,c.start,c.end),null!=e?(d=this.findEntityAnnotation(e.entityAnnotations,{uri:c.uri}),h.push(null!=d?d.selected=!0:void 0)):h.push(void 0);return h},analyze:function(e,f){var g;return null==f&&(f=!1),this.isRunning?void 0:(this.isRunning=!0,this.promise=b.defer(),g=this,a({method:"post",url:ajaxurl+"?action=wordlift_analyze",data:e,timeout:this.promise.promise}).success(function(a){return c.$broadcast(d,g.parse(a,f)),g.isRunning=!1}).error(function(a,b){return g.isRunning=!1,c.$broadcast(d,void 0),0!==b?c.$broadcast("error","An error occurred while requesting an analysis."):void 0}))},findEntityAnnotation:function(a,b){var c,d,f;if(null!=b.uri)for(d in a)if(c=a[d],b.uri===c.entity.id||(f=b.uri,e.call(c.entity.sameAs,f)>=0))return c;if(null!=b.selected)for(d in a)if(c=a[d],c.selected)return c},parse:function(a,b){var d,h,o,r,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V;if(null==b&&(b=!1),L=[],Q={},B={},y={},F=function(a){var b,c,d,e,f,h,i,j,o,p,q,r,s,t,u,v,w,x,y,z,A,B,D,E,F,G;if(null==a)return"thing";for(c=angular.isArray(a)?a:[a],d=0,i=c.length;i>d;d++)if(b=c[d],"http://schema.org/Person"===C(b))return m;for(e=0,j=c.length;j>e;e++)if(b=c[e],"http://rdf.freebase.com/ns/people.person"===C(b))return m;for(f=0,q=c.length;q>f;f++)if(b=c[f],"http://schema.org/Organization"===C(b))return l;for(h=0,r=c.length;r>h;h++)if(b=c[h],"http://rdf.freebase.com/ns/government.government"===C(b))return l;for(y=0,s=c.length;s>y;y++)if(b=c[y],"http://schema.org/Newspaper"===C(b))return l;for(z=0,t=c.length;t>z;z++)if(b=c[z],"http://schema.org/Place"===C(b))return n;for(A=0,u=c.length;u>A;A++)if(b=c[A],"http://rdf.freebase.com/ns/location.location"===C(b))return n;for(B=0,v=c.length;v>B;B++)if(b=c[B],"http://schema.org/Event"===C(b))return g;for(D=0,w=c.length;w>D;D++)if(b=c[D],"http://dbpedia.org/ontology/Event"===C(b))return g;for(E=0,x=c.length;x>E;E++)if(b=c[E],"http://rdf.freebase.com/ns/music.artist"===C(b))return k;for(F=0,o=c.length;o>F;F++)if(b=c[F],"http://schema.org/MusicAlbum"===C(b))return k;for(G=0,p=c.length;p>G;G++)if(b=c[G],"http://www.opengis.net/gml/_Feature"===C(b))return n;return"thing"},t=function(a,b){var c,d,e,f,g;return d=D("@id",a),g=D("@type",a),e=D("http://www.w3.org/2002/07/owl#sameAs",a),e=angular.isArray(e)?e:[e],f=D(["http://xmlns.com/foaf/0.1/depiction","http://rdf.freebase.com/ns/common.topic.image","http://schema.org/image"],a,function(a){var b,c,d,e,f;for(a=angular.isArray(a)?a:[a],f=[],d=0,e=a.length;e>d;d++)c=a[d],b=/m\.(.*)$/i.exec(c),f.push(null===b?c:"https://usercontent.googleapis.com/freebase/v1/image/m/"+b[1]+"?maxwidth=4096&maxheight=4096");return f}),c={id:d,thumbnail:0<f.length?f[0]:null,thumbnails:f,type:F(g),types:g,label:G(q,a,b),labels:D(q,a),sameAs:e,source:d.match("^http://rdf.freebase.com/.*$")?"freebase":d.match("^http://dbpedia.org/.*$")?"dbpedia":"wordlift",_item:a},c.description=G([p,i,s],a,b),c.descriptions=D([p,i,s],a),null==c.description&&(c.description=""),c.latitude=D("http://www.w3.org/2003/01/geo/wgs84_pos#lat",a),c.longitude=D("http://www.w3.org/2003/01/geo/wgs84_pos#long",a),c},u=function(a){var b,c,d,e,f,g,h,i,j,k;if(f=D("http://fise.iks-project.eu/ontology/entity-reference",a),c=y[f],null==c)return null;for(b=[],e=D("@id",a),h=D("http://purl.org/dc/terms/relation",a),h=angular.isArray(h)?h:[h],j=0,k=h.length;k>j;j++)g=h[j],i=Q[g],d={id:e,label:D("http://fise.iks-project.eu/ontology/entity-label",a),confidence:D("http://fise.iks-project.eu/ontology/confidence",a),entity:c,relation:i,_item:a,selected:!1},null!=i&&(i.entityAnnotations[d.id]=d),b.push(d);return b[0]},w=function(a){var b;return b={id:D("@id",a),selectedText:D("http://fise.iks-project.eu/ontology/selected-text",a)["@value"],selectionPrefix:D("http://fise.iks-project.eu/ontology/selection-prefix",a)["@value"],selectionSuffix:D("http://fise.iks-project.eu/ontology/selection-suffix",a)["@value"],start:D("http://fise.iks-project.eu/ontology/start",a),end:D("http://fise.iks-project.eu/ontology/end",a),confidence:D("http://fise.iks-project.eu/ontology/confidence",a),entityAnnotations:{},_item:a}},v=function(a){return{code:D("http://purl.org/dc/terms/language",a),confidence:D("http://fise.iks-project.eu/ontology/confidence",a),_item:a}},D=function(a,b,c){var d,e,f,g,h;if(!angular.isArray(a))return E(a,b,c);for(f=[],g=0,h=a.length;h>g;g++)e=a[g],d=E(e,b,c),d=angular.isArray(d)?d:[d],N(f,d);return f},E=function(a,b,c){var d,e,f;null==c&&(c=function(a){return a}),f=C(a);for(d in b)if(e=b[d],f===C(d))return c(e);return[]},G=function(a,b,c){var d,e,f,g;if(null!==(e=D(a,b))){for(e=angular.isArray(e)?e:[e],f=0,g=e.length;g>f;f++)if(d=e[f],c===d["@language"])return d["@value"];return null}},o=function(a,b){var c,d,e,f,g,h,i;if(null==b)return!1;if(e=angular.isArray(b)?b:[b],d=C(a),"@"===a.charAt(0)){for(f=0,h=e.length;h>f;f++)if(c=e[f],d===C(c))return!0}else for(g=0,i=e.length;i>g;g++)if(c=e[g],d===C(c))return!0;return!1},N=function(a,b){var c,d,f,g;for(g=[],d=0,f=b.length;f>d;d++)c=b[d],e.call(a,c)<0&&g.push(a.push(c));return g},M=function(a,b){var c,d,e,f,g;for(g=a.sameAs,e=0,f=g.length;f>e;e++)d=g[e],null!=b[d]&&b[d]!==a&&(c=b[d],N(a.sameAs,c.sameAs),N(a.thumbnails,c.thumbnails),a.source+=", "+c.source,"dbpedia"===c.source&&(a.description=c.description),"dbpedia"===c.source&&null!=c.longitude&&(a.longitude=c.longitude),"dbpedia"===c.source&&null!=c.latitude&&(a.latitude=c.latitude),b[d]=a,M(a,b));return a},C=function(a){var b,c,d,e;return null===(b=a.match(/([\w|\d]+):(.*)/))?(d=a,c=""):(d=b[1],c=b[2]),e=null!=r[d]?angular.isString(r[d])?r[d]:r[d]["@id"]:d+":",e+c},null==a[f]||null==a[j])return c.$broadcast("error","The analysis response is invalid. Please try again later."),!1;for(r=a[f],H=a[j],S=0,T=H.length;T>S;S++)J=H[S],I=J["@id"],R=J["@type"],x=D("http://purl.org/dc/terms/type",J),o("http://fise.iks-project.eu/ontology/TextAnnotation",R)&&o("http://purl.org/dc/terms/LinguisticSystem",x)?L.push(v(J)):o("http://fise.iks-project.eu/ontology/TextAnnotation",R)?Q[I]=J:o("http://fise.iks-project.eu/ontology/EntityAnnotation",R)?B[I]=J:y[I]=J;L.sort(function(a,b){return a.confidence<b.confidence?-1:a.confidence>b.confidence?1:0}),K=L[0].code;for(I in y)J=y[I],y[I]=t(J,K);if(b)for(I in y)z=y[I],M(z,y);for(I in Q)J=Q[I],Q[I]=w(J);for(I in B)J=B[I],B[I]=u(J);if(b)for(P in Q){O=Q[P],U=O.entityAnnotations;for(I in U){A=U[I],V=O.entityAnnotations;for(h in V)d=V[h],I!==h&&A.entity===d.entity&&delete O.entityAnnotations[h]}}return{language:K,entities:y,entityAnnotations:B,textAnnotations:Q,languages:L}}}}]),angular.module("wordlift.tinymce.plugin.services.EditorService",["wordlift.tinymce.plugin.config","AnalysisService"]).service("EditorService",["AnalysisService","$rootScope",function(c,d){var e,f,g,h,i,j,k,l,m;return g="content",j="textannotation",f="#content_ifr",i="running",h=".mce_wordlift",e="contenteditable",k=function(){return tinyMCE.get(g)},l=function(a){var c,d,e,f;for(e=b.create(a),d=/<(\w+)[^>]*\sitemid="([^"]+)"[^>]*>([^<]+)<\/\1>/gim,f=[];c=d.exec(a);)f.push({start:e.html2text(c.index),end:e.html2text(c.index+c[0].length),uri:c[2],label:c[3]});return f},m={embedAnalysis:function(a){var d,e,f,g,h,i,m,n,o,p,q;d=k(),i=d.getContent({format:"raw"}),f=l(i),c.preselect(a,f),i=i.replace(/<(\w+)[^>]*\sclass="textannotation[^"]*"[^>]*>([^<]+)<\/\1>/gim,"$2"),p=b.create(i),q=a.textAnnotations;for(o in q)n=q[o],0<Object.keys(n.entityAnnotations).length&&(e='<span id="'+o+'" class="'+j,h=c.findEntityAnnotation(n.entityAnnotations,{selected:!0}),null!=h&&(g=h.entity,e+=" highlight "+g.type+'" itemid="'+g.id),e+='">',p.insertHtml(e,{text:n.start}),p.insertHtml("</span>",{text:n.end}));return m=d.isDirty(),d.setContent(p.getHtml()),d.isNotDirty=!m},analyze:function(b){return c.isRunning?c.abort():(a(h).addClass(i),k().getBody().setAttribute(e,!1),c.analyze(b,!0))},getWinPos:function(b){var c,d;return c=k(),d=b.target,{top:a(f).offset().top-a("body").scrollTop()+d.offsetTop-a(c.getBody()).scrollTop(),left:a(f).offset().left-a("body").scrollLeft()+d.offsetLeft-a(c.getBody()).scrollLeft()}}},d.$on("selectEntity",function(a,b){var c,d,e,f,g,h,i;return d=k().dom,f=b.ta.id,c=j,null!=b.ea?(e=b.ea.entity,c+=" highlight "+e.type,h="itemscope",i=e.type,g=e.id):(h=null,i=null,g=null),d.setAttrib(f,"class",c),d.setAttrib(f,"itemscope",h),d.setAttrib(f,"itemtype",i),d.setAttrib(f,"itemid",g)}),d.$on("analysisReceived",function(b,c){return null!=c&&null!=c.textAnnotations&&m.embedAnalysis(c),a(h).removeClass(i),k().getBody().setAttribute(e,!0)}),m}]),angular.module("wordlift.tinymce.plugin.services.EntityService",["wordlift.tinymce.plugin.config"]).service("EntityService",["$log",function(b){var c;return c=a("#wordlift_selected_entitities_box"),{select:function(d){var e,f,g,h,i,j,k,l,m,n;if(b.info("select"),b.info(d),f=d.entity,h=f.id,k=f.label,e=null!=f.description?f.description:"",j=f.thumbnails,l=f.type,g=a("<div itemid='"+h+"'></div>").append("<input type='text' name='wl_entities["+h+"][uri]' value='"+h+"'>").append("<input type='text' name='wl_entities["+h+"][label]' value='"+k+"'>").append("<input type='text' name='wl_entities["+h+"][description]' value='"+e+"'>").append("<input type='text' name='wl_entities["+h+"][type]' value='"+l+"'>"),angular.isArray(j))for(m=0,n=j.length;n>m;m++)i=j[m],g.append("<input type='text' name='wl_entities["+h+"][image]' value='"+i+"'>");else g.append("<input type='text' name='wl_entities["+h+"][image]' value='"+j+"'>");return c.append(g)},deselect:function(c){var d,e;return b.info("deselect"),b.info(c),d=c.entity,e=d.id,a("div[itemid='"+e+"']").remove()}}}]),angular.module("wordlift.tinymce.plugin.services",["wordlift.tinymce.plugin.config","wordlift.tinymce.plugin.services.EditorService","AnalysisService","wordlift.tinymce.plugin.services.EntityService"]),angular.module("wordlift.tinymce.plugin.controllers",["wordlift.tinymce.plugin.config","wordlift.tinymce.plugin.services"]).filter("orderObjectBy",function(){return function(a,b,c){var d;return d=[],angular.forEach(a,function(a){return d.push(a)}),d.sort(function(a,c){return a[b]>c[b]}),c&&d.reverse(),d}}).filter("filterObjectBy",function(){return function(a,b,c){var d;return d=[],angular.forEach(a,function(a){return a[b]===c?d.push(a):void 0}),d}}).controller("EntitiesController",["EditorService","EntityService","$log","$scope","Configuration",function(b,c,d,e,f){var g,h,i;return e.analysis=null,e.textAnnotation=null,e.textAnnotationSpan=null,e.sortByConfidence=function(a){return a[f.entityLabels.confidence]},e.getLabelFor=function(a){return f.entityLabels[a]},i=function(b){return a("head").append("<style>#wordlift-disambiguation-popover .postbox:before,#wordlift-disambiguation-popover .postbox:after{top:"+b+"px;}</style>")},g=void 0,h=function(){var a;if(null!=g)return a=b.getWinPos(g),i(a.top-50)},a(window).scroll(h),a("#content_ifr").contents().scroll(h),e.onEntitySelected=function(a,b){return e.$emit("selectEntity",{ta:a,ea:b})},e.$on("disambiguatedTextAnnotationDetected",function(a,b,c){var d,f,g,h;g=e.analysis.textAnnotations[b].entityAnnotations,h=[];for(f in g)d=g[f],h.push(d.entity.id===c?e.analysis.entityAnnotations[d.id].selected=!0:void 0);return h}),e.$on("analysisReceived",function(a,b){return e.analysis=b}),e.$on("textAnnotationClicked",function(c,d,f){var g,h;return e.textAnnotationSpan=angular.element(f.target),e.textAnnotation=e.analysis.textAnnotations[d],null==(null!=(h=e.textAnnotation)?h.entityAnnotations:void 0)||0===Object.keys(e.textAnnotation.entityAnnotations).length?a("#wordlift-disambiguation-popover").hide():(g=b.getWinPos(f),i(g.top-50),a("#wordlift-disambiguation-popover").show())})}]).controller("ErrorController",["$element","$scope","$log",function(b,c){var d;return d=a(b).dialog({title:"WordLift",dialogClass:"wp-dialog",modal:!0,autoOpen:!1,closeOnEscape:!0,buttons:{Ok:function(){return a(this).dialog("close")}}}),c.$on("error",function(a,b){return c.message=b,d.dialog("open")})}]),a=jQuery,angular.module("wordlift.tinymce.plugin",["wordlift.tinymce.plugin.controllers","wordlift.tinymce.plugin.directives"]),a(c=a('<div id="wl-app" class="wl-app">\n  <div id="wl-error-controller" class="wl-error-controller" ng-controller="ErrorController">\n    <p ng-bind="message"></p>\n  </div>\n  <div id="wordlift-disambiguation-popover" class="metabox-holder" ng-controller="EntitiesController">\n    <div class="postbox">\n      <div class="handlediv" title="Click to toggle"><br></div>\n      <h3 class="hndle"><span>Semantic Web</span></h3>\n      <div class="inside">\n        <form role="form">\n          <div class="form-group">\n            <div class="ui-widget">\n              <input type="text" class="form-control" id="search" placeholder="search or create">\n            </div>\n          </div>\n\n          <wl-entities on-select="onEntitySelected(textAnnotation, entityAnnotation)" text-annotation="textAnnotation"></wl-entities>\n\n        </form>\n\n        <wl-entity-input-boxes text-annotations="analysis.textAnnotations"></wl-entity-input-boxes>\n      </div>\n    </div>\n  </div>\n</div>').appendTo("form[name=post]"),a("#wordlift-disambiguation-popover").css({display:"none",height:a("body").height()-a("#wpadminbar").height()+32,top:a("#wpadminbar").height()-1,right:0}).draggable(),a("#search").autocomplete({source:ajaxurl+"?action=wordlift_search",minLength:2,select:function(a,b){return console.log(a),console.log(b)}}).data("ui-autocomplete")._renderItem=function(b,c){return console.log(b),a("<li>").append('<li>\n  <div class="entity '+c.types+'">\n    <!-- div class="thumbnail" style="background-image: url(\'\')"></div -->\n    <div class="thumbnail empty"></div>\n    <div class="confidence"></div>\n    <div class="label">'+c.label+'</div>\n    <div class="type"></div>\n    <div class="source"></div>\n  </div>\n</li>').appendTo(b)},a("#wordlift-disambiguation-popover .handlediv").click(function(){return a("#wordlift-disambiguation-popover").hide()}),d=angular.bootstrap(a("#wl-app"),["wordlift.tinymce.plugin"]),tinymce.PluginManager.add("wordlift",function(a){return a.addButton("wordlift",{text:"WordLift",icon:!1,onclick:function(){return d.invoke(["EditorService","$rootScope",function(a,c){return c.$apply(function(){var c,d;return c=tinyMCE.activeEditor.getContent({format:"raw"}),d=b.create(c).getText(),a.analyze(d)})}])}}),a.onClick.add(function(a,b){return d.invoke(["$rootScope",function(a){return a.$apply(function(){return a.$broadcast("textAnnotationClicked",b.target.id,b)})}])})}))}).call(this);
//# sourceMappingURL=wordlift.min.map