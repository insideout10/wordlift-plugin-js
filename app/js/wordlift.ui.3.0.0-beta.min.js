(function(){var a,b,c;a=jQuery,c=function(c){return a.post(c.ajax_url,{action:c.action,post_id:c.post_id,depth:c.depth},function(a){var d;return d=JSON.parse(a),b(d,c)})},b=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D;if(!(a.entities.length<2)){for(t=function(a,b,c){return"translate("+a*c+","+b*c+")"},p=function(a){return"rotate("+a+")"},n=function(a){return a/(2*Math.PI)*360},q=function(a){return a>=0?1:-1},d=function(a){return a.length>12?a.substring(0,12)+"...":a},f=function(a,b){var c,d,e,f;for(a=String(a).replace(/[^0-9a-f]/gi,""),a.length<6&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),b=b||0,e="#",c=void 0,d=void 0,d=f=0;3>=f;d=++f)c=parseInt(a.substr(2*d,2),16),c=Math.round(Math.min(Math.max(0,c+c*b),255)).toString(16),e+=("00"+c).substr(c.length);return e},i=function(b){var c,d,e;for(c=d=0,e=a.entities.length;e>=0?e>=d:d>=e;c=e>=0?++d:--d)if(a.entities[c].uri===b)return c;return-1},l=[],C=a.entities,y=0,A=C.length;A>y;y++)h=C[y],l.push(function(){var b,c,d,e;for(d=a.entities,e=[],b=0,c=d.length;c>b;b++)g=d[b],e.push(0);return e}());for(D=a.relations,z=0,B=D.length;B>z;z++)o=D[z],w=i(o.s),x=i(o.o),l[w][x]=1,l[x][w]=1;return u=d3.select("#"+b.widget_id).append("svg"),u.attr("width","100%").attr("height","100%"),v=parseInt(u.style("width")),j=parseInt(u.style("height")),r=v>j?j:v,k=.2*r,m=.25*r,c=d3.svg.arc().innerRadius(k).outerRadius(m),e=d3.layout.chord().padding(.3).matrix(l),u.selectAll("chords").data(e.chords).enter().append("path").attr("class","relation").attr("d",d3.svg.chord().radius(k)).attr("transform",t(.5,.5,r)).style("opacity",.2).on("mouseover",function(){return d3.select(this).style("opacity",.8)}).on("mouseout",function(){return d3.select(this).style("opacity",.2)}),u.selectAll("arcs").data(e.groups).enter().append("path").attr("class",function(b){return"entity "+a.entities[b.index].css_class}).attr("d",c).attr("transform",t(.5,.5,r)).style("fill",function(c){var d,e;return d=b.main_color,e=a.entities[c.index].type,"post"===e?d:"entity"===e?f(d,-.5):f(d,.5)}),u.selectAll("arcs_labels").data(e.groups).enter().append("text").attr("class","label").attr("font-size",function(){var a;return a=parseInt(r/35),8>a&&(a=8),a+"px"}).each(function(b){var c,d,e,f,g;for(d=a.entities[b.index].label.split(/\s/),e=d3.select(this).attr("dy",d.length/3-.9*(d.length-1)+"em").html(d[0]),c=f=1,g=d.length;g>=1?g>=f:f>=g;c=g>=1?++f:--f)e.append("tspan").attr("x",0).attr("dy","1em").html(d[c]);return e.attr("transform",function(a){var b,c,d,e;return b=a.startAngle-Math.PI/2+Math.abs((a.endAngle-a.startAngle)/2),d=3,c=void 0,b>Math.PI/2?(c=b-Math.PI,d+=d3.select(this)[0][0].clientWidth):c=b,c=n(c),e=(m+d)/r,w=.5+e*Math.cos(b),x=.5+e*Math.sin(b),t(w,x,r)+p(c)})}),s=d3.select("body").append("div").attr("class","tooltip").style("background-color","white").style("opacity",0).style("position","absolute").style("z-index",100),u.selectAll(".entity, .label").on("mouseover",function(b){return d3.select(this).attr("cursor","pointer"),u.selectAll(".relation").filter(function(a){return a.source.index===b.index||a.target.index===b.index}).style("opacity",.8),s.text(a.entities[b.index].label).style("opacity",1)}).on("mouseout",function(a){return u.selectAll(".relation").filter(function(b){return b.source.index===a.index||b.target.index===a.index}).style("opacity",.2),s.style("opacity",0)}).on("mousemove",function(){return s.style("left",d3.event.pageX+"px").style("top",d3.event.pageY-30+"px")}).on("click",function(b){var c;return c=a.entities[b.index].url,window.location=c})}},a(document).ready(function(){return a(".wl-chord").each(function(){var b;return b=a(this).data(),b.widget_id=a(this).attr("id"),a.extend(b,wl_chord_params),c(b)})}),jQuery.noConflict()(function(a){return a(".wl-timeline").each(function(){var b,c;return c=a(this).data(),b=a(this).attr("id"),a.extend(c,wl_timeline_params),a.post(c.ajax_url,{action:c.action,post_id:c.postId},function(c){return null!=c.timeline?createStoryJS({type:"timeline",width:"100%",height:"600",source:c,embed_id:b,start_at_slide:c.startAtSlide}):a("#"+b).html("No data for the timeline.").height("30px").css("background-color","red")})})})}).call(this);
//# sourceMappingURL=wordlift.ui.3.0.0-beta.min.map