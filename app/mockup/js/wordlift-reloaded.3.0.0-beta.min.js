(function(){var a,b,c,d,e=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};b=function(){function a(a){this._html=a}return a.prototype._htmlPositions=[],a.prototype._textPositions=[],a.prototype._html="",a.prototype._text="",a.create=function(b){var c;return c=new a(b),c.parse(),c},a.prototype.parse=function(){var a,b,c,d,e,f,g,h,i;for(this._htmlPositions=[],this._textPositions=[],this._text="",this._html=this._html.replace(/&nbsp;/gim," "),f=/([^<]*)(<[^>]*>)([^<]*)/gim,g=0,b=0;e=f.exec(this._html);)d=e[1],a=e[2],c=e[3],i=d+("</p>"===a.toLowerCase()?"\n\n":""),h=c,g+=i.length,b+=d.length+a.length,this._htmlPositions.push(b),this._textPositions.push(g),g+=h.length,b+=c.length,this._text+=i+h;return""===this._text&&""!==this._html&&(this._text=new String(this._html)),0===this._textPositions.length||0!==this._textPositions[0]?(this._htmlPositions.unshift(0),this._textPositions.unshift(0)):void 0},a.prototype.text2html=function(a){var b,c,d,e,f;for(b=0,d=0,c=e=0,f=this._textPositions.length;(f>=0?f>e:e>f)&&!(a<this._textPositions[c]);c=f>=0?++e:--e)b=this._htmlPositions[c],d=this._textPositions[c];return b+a-d},a.prototype.html2text=function(a){var b,c,d,e,f;if(a<this._htmlPositions[0])return 0;for(b=0,d=0,c=e=0,f=this._htmlPositions.length;(f>=0?f>e:e>f)&&!(a<this._htmlPositions[c]);c=f>=0?++e:--e)b=this._htmlPositions[c],d=this._textPositions[c];return d+a-b},a.prototype.insertHtml=function(a,b){var c;return c=this.text2html(b.text),this._html=this._html.substring(0,c)+a+this._html.substring(c),this.parse()},a.prototype.getHtml=function(){return this._html},a.prototype.getText=function(){return this._text},a}(),window.Traslator=b,a=jQuery,angular.module("wordlift.core",[]).service("AnalysisService",["$log","$http","$rootScope",function(a,b,c){var d,e;return d=e={},d.parse=function(a){var b,c,d,e,f,g,h,i,j;h=a.entities;for(d in h)c=h[d],c.occurrences=0;i=a.annotations;for(d in i)for(b=i[d],j=b.entityMatches,f=0,g=j.length;g>f;f++)e=j[f],a.entities[e.entityId].occurrences+=1;return a},d.perform=function(){return b({method:"get",url:"assets/sample-response.json"}).success(function(a){return c.$broadcast("analysisPerformed",d.parse(a))})},d}]).service("ConfigurationService",["$log","$http","$rootScope",function(a,b,c){var d,e;return d=e={},d.loadConfiguration=function(){return b({method:"get",url:"assets/sample-widget-configuration.json"}).success(function(a){return c.$broadcast("configurationLoaded",a)})},d}]).controller("coreController",["$log","$scope","$rootScope",function(a,b){return b.configuration=[],b.analysis={},b.entitySelection={},b.occurences={},b.$on("configurationLoaded",function(a,c){var d,e,f,g;for(g=c.classificationBoxes,e=0,f=g.length;f>e;e++)d=g[e],b.entitySelection[d.id]=[];return b.configuration=c}),b.$on("analysisPerformed",function(c,d){return a.debug(d),b.analysis=d}),b.onSelectedEntityTile=function(c,d){return a.debug("Entity tile selected for entity "+c+" within '"+d+"' scope"),e.call(b.entitySelection[d],c)<0?b.entitySelection[d].push(c):void 0}}]),a(c=a('<div id="wordlift-edit-post-wrapper" ng-controller="coreController">\n	<ul ng-repeat="box in configuration.classificationBoxes" class="classification-box">\n		<li>{{box.label}}</li>\n		<ul ng-repeat="(entityId, entity) in analysis.entities">\n			<li ng-click="onSelectedEntityTile( entityId, box.id )" ng-class="\'wl-\' + entity.mainType">{{entity.label}} <small>({{entity.occurrences}})</small></li>\n		</ul>\n	</ul>\n	<hr />\n	<div ng-repeat="(box, ids) in entitySelection">\n		<span>{{ box }}</span> - <span>{{ ids }}</span> \n	</div>\n</div>').appendTo("#dx")),d=angular.bootstrap(a("#wordlift-edit-post-wrapper"),["wordlift.core"]),d.invoke(["ConfigurationService","AnalysisService","$rootScope",function(a,b,c){return c.$apply(function(){return b.perform(),a.loadConfiguration()})}])}).call(this);
//# sourceMappingURL=wordlift-reloaded.3.0.0-beta.min.map